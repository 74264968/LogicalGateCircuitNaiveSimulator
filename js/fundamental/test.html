<!DOCTYPE html>
<html>
<head>
  <script language="javascript" src="./gates.js"></script>
  <script language="javascript" src="./simulating.js"></script>
  <script language="javascript">
  function SmokingTest( ) {
    var c = new Clock( 0, 50 );
    var connector = new Connector( null, 3 );
    var g_Or1 = new OrGate( );
    var g_Or2 = new OrGate( );
    var g_Not = new NotGate( );
    var g_And = new AndGate( );
    connector.connector_to( c );
    g_Or1.inputs.push( c );
    g_Or2.inputs.push( connector );
    g_Not.inputs.push( g_Or2 );
    g_And.inputs.push( g_Or1 );
    g_And.inputs.push( g_Or2 );

    class ConsoleMonitor { 
      constructor() {}
      update( tick ) {
        console.log( tick, g_Or1.peek( tick - 1 ) );
      }
    }

    var simulator = new Simulator( [c, connector, g_Or1, g_Or2, g_Not, g_And], 0 );
    var loop = new MainLoop( simulator, 10, 150 );
    loop.register_monitor( new ConsoleMonitor() );
    function update( )
    {
      loop.update();
    }
    setInterval( update, loop.frame_in_ms );
    loop.start();
  }
  </script>
</head>
<body onload="javascript:SmokingTest()">
</body>
</html>
